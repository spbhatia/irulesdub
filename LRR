 
the status page generated is taking time. sometime it response on 2 second and sometime in 20 second.
Server is IHS.
what could be the root cause of the dalay.. we tried on the same server.
please perform a deep inspection and let me know.
Based on my research, I have gathered comprehensive information about the potential root causes of the intermittent slow response times for the mod_status server-status page on IHS. Let me provide Sanket with a detailed technical analysis.
Deep Inspection: Root Causes of Intermittent Slow /server-status Response Times on IHS
Hey Sanket! I've performed a thorough analysis of your mod_status configuration and the intermittent slow response issue (2 seconds vs 20 seconds). Based on the configuration in your screenshot and extensive research, here are the most likely root causes and troubleshooting steps:
Primary Root Causes (Ranked by Probability)
1. Reverse DNS Lookup Delays (MOST LIKELY)
Your configuration shows:
Require all denied
Require ip 192.168.1

The Problem:
When using Require ip or access control directives with ExtendedStatus On, Apache may perform reverse DNS lookups on incoming client IP addresses to resolve hostnames, even when you're only checking IPs[1][2][3]. This is intermittent because:
‚Ä¢	DNS queries can take 2-20 seconds depending on DNS server response times[4]
‚Ä¢	If the reverse DNS record doesn't exist or the DNS server is slow/unresponsive, Apache waits for the DNS timeout (typically 5-30 seconds)[1][2]
‚Ä¢	This happens before the page is even generated[2]
Evidence from your scenario:
‚Ä¢	Response varies from 2s to 20s (classic DNS timeout pattern)
‚Ä¢	Same server, different response times
‚Ä¢	Not specific to page content or load
Critical Fix:
# In httpd.conf - DISABLE hostname lookups
HostnameLookups Off

Check your current setting:
grep -i "HostnameLookups" /path/to/httpd.conf

Even with IP-based access control, if HostnameLookups is On or if Apache tries to do reverse lookups for logging/access control, you'll see these delays[1][2][5].
 
2. ExtendedStatus Performance Overhead
Your mod_status configuration likely has ExtendedStatus On to show detailed metrics.
The Problem:
With ExtendedStatus On, Apache performs two calls to gettimeofday() for EVERY request to collect timing information[6][7][8][9]. Under certain conditions, this can create measurable overhead:
‚Ä¢	At 18 requests/sec: ~0.09 average load increase[7]
‚Ä¢	CPU usage can increase by 1% or more[10][8]
‚Ä¢	On slower systems or during high I/O wait, this compounds[11]
When this becomes problematic:
‚Ä¢	Server is already under load (CPU/disk I/O)
‚Ä¢	Many simultaneous connections
‚Ä¢	Disk I/O bottlenecks (especially with NFS or slow storage)[11][10]
Verification:
# Check current setting
grep -i "ExtendedStatus" /path/to/httpd.conf

# Monitor with strace during slow response
strace -p <httpd_pid> -e trace=gettimeofday

Mitigation:
ExtendedStatus Off  # Turn off if detailed metrics aren't critical

 
3. Access Control with .htaccess File Lookups
Based on your configuration mentioning AccessFileName .htaccess:
The Problem:
Apache searches for .htaccess files in every directory level of the requested path, even if they don't exist[12][13][14][15]. For /server-status, Apache checks:
‚Ä¢	Root directory
‚Ä¢	Each intermediate directory
This causes filesystem seeks and reads for every request[12][13].
Performance Impact:
‚Ä¢	2.3% performance decrease with .htaccess enabled (even empty files)[13]
‚Ä¢	16% decrease with actual directive processing[12]
‚Ä¢	40-60% decrease with large IP block lists in .htaccess[12]
‚Ä¢	Intermittent slowness if filesystem cache is cold or under I/O pressure
Fix:
# In httpd.conf - disable .htaccess for server-status
<Location /server-status>
    AllowOverride None
</Location>

Or globally:
<Directory />
    AllowOverride None
</Directory>

 
4. KeepAlive Connection Timeout Issues
The Problem:
If KeepAlive settings are misconfigured, you can see response delays matching the KeepAliveTimeout value[16][17][18][19].
Symptoms matching your issue:
‚Ä¢	Response times vary wildly (2s vs 20s)
‚Ä¢	Not consistent per request
‚Ä¢	May be client/proxy-dependent
What to check:
# Your current settings
grep -i "KeepAlive" /path/to/httpd.conf

Recommended settings for mod_status:
KeepAlive On
KeepAliveTimeout 5    # Lower value (not 15-30)
MaxKeepAliveRequests 100

Why this matters:
‚Ä¢	If clients/proxies aren't closing connections properly, threads wait for KeepAliveTimeout before becoming available[17][18]
‚Ä¢	Corporate proxies can cause KeepAlive delays[16]
 
5. Thread Pool Exhaustion/Busy Workers
The Problem:
If all worker threads are busy, new requests (including /server-status) wait in queue until a thread becomes available[20][21][22][23].
Check current status:
# Access /server-status when it responds quickly
curl http://192.168.1.x/server-status

# Look for:
# - Busy Workers vs Idle Workers
# - All threads in "K" (KeepAlive) or "W" (Waiting) state

Indicators of thread exhaustion:
‚Ä¢	Many threads in "K" (KeepAlive wait) state
‚Ä¢	BusyWorkers approaching MaxClients[24][10][23]
Tuning:
# For Worker/Event MPM
<IfModule mpm_worker_module>
    ServerLimit         16
    StartServers         2
    MaxClients         150  # Adjust based on capacity
    MinSpareThreads     25
    MaxSpareThreads     75
    ThreadsPerChild     25
    MaxRequestsPerChild  0
</IfModule>

# Lower KeepAliveTimeout if many "K" state threads
KeepAliveTimeout 5

 
Immediate Diagnostic Steps
Step 1: Check DNS Settings
# Verify HostnameLookups is OFF
grep -i "HostnameLookups" /opt/IBM/HTTPServer/conf/httpd.conf

# Should be: HostnameLookups Off

Step 2: Test with strace (during slow response)
# Find httpd PIDs
ps auxw | grep httpd

# Attach strace to a worker
strace -p <worker_pid> -f -e trace=connect,poll,sendto,recvfrom 2>&1 | tee /tmp/strace.log

# Look for DNS queries (port 53) taking 5-20 seconds

Step 3: Monitor mod_status itself
# Quick check during normal operation
while true; do 
    time curl -s http://192.168.1.x/server-status > /dev/null
    sleep 2
done

# Watch for patterns in response times

Step 4: Check for .htaccess overhead
# Find any .htaccess files in path
find /opt/IBM/HTTPServer/htdocs -name ".htaccess"

# Disable AllowOverride temporarily
<Location /server-status>
    AllowOverride None
</Location>

Step 5: Review IHS logs during slow response
# Enable debug logging temporarily
LogLevel debug

# Check error_log for DNS lookups or delays
tail -f /opt/IBM/HTTPServer/logs/error_log

 
Recommended Configuration Changes
Based on best practices for IHS/Apache mod_status[25][24][10]:
# In httpd.conf

# 1. DISABLE hostname lookups
HostnameLookups Off

# 2. Configure mod_status with IP-only access (no hostname)
<IfModule mod_status.c>
    ExtendedStatus On  # Keep if you need detailed metrics
    
    <Location /server-status>
        SetHandler server-status
        
        # Use IP-based access ONLY
        Require all denied
        Require ip 192.168.1    # Your subnet
        
        # NO .htaccess lookups
        AllowOverride None
    </Location>
</IfModule>

# 3. Optimize KeepAlive for monitoring
KeepAlive On
KeepAliveTimeout 5
MaxKeepAliveRequests 100

# 4. If ExtendedStatus causes issues, turn off
# ExtendedStatus Off

 
Advanced Troubleshooting
If issue persists after above fixes:
1.	Network latency between client and server
o	Test from same host: curl http://localhost/server-status
o	Compare with remote access
2.	Backend application delays (if mod_status triggers any backend checks)
o	Unlikely for mod_status, but check for custom modules
3.	Disk I/O bottlenecks
# Monitor disk I/O during slow response
iostat -x 1

4.	Resource contention (memory/CPU)
# During slow response
top -H -p <httpd_pid>
vmstat 1

 
Expected Results After Fixes
‚Ä¢	Consistent response times: 50-200ms for /server-status
‚Ä¢	No DNS delays: strace shows no DNS queries (port 53)
‚Ä¢	Lower CPU overhead: If ExtendedStatus disabled
‚Ä¢	No .htaccess lookups: Faster filesystem operations
 
Key Takeaway
Sanket, based on your configuration and symptoms, reverse DNS lookups are the #1 suspect. The intermittent nature (2s vs 20s) strongly suggests DNS timeout variability. Start with:
1.	Set HostnameLookups Off
2.	Remove any hostname-based access control (use IP-only)
3.	Disable .htaccess for /server-status location
4.	Lower KeepAliveTimeout to 5 seconds
Test after each change and monitor with the diagnostic steps above. This should resolve your issue!
Let me know what you find, and we can dig deeper if needed! üëç

‚ÅÇ
 
1.	https://docs.oracle.com/cd/A95434_01/a86676/listener.htm   
2.	https://www.ozzu.com/wiki/599108/slow-apache-response-due-to-htaccess-hostname-lookups    
3.	https://www.debuntu.org/spying-apache-server-activity-and-performance-with-mod_status/ 
4.	https://www.catchpoint.com/dns-monitoring/slow-dns 
5.	https://www.webmasterworld.com/apache/3464410.htm 
6.	https://stackoverflow.com/questions/2022882/will-enabling-mod-status-in-apache-slow-my-app-down 
7.	https://philchen.com/2008/06/02/apache-20-mod_status-effects-on-performance-server-resources/  
8.	https://www.datadoghq.com/blog/collect-apache-performance-metrics/  
9.	https://httpd.apache.org/docs/2.4/misc/perf-tuning.html 
10.	https://publib.boulder.ibm.com/httpserv/ihsdiag/ihs_performance.html    
11.	https://support.cpanel.net/hc/en-us/community/posts/19632005482903-Apache-s-mod-status-causes-high-IOWait  
12.	https://www.net7.be/blog/article/htaccess_impact_on_performance.html    
13.	https://simon.net.nz/articles/benchmarking-htaccess-performance/   
14.	https://www.highperformancelaravel.com/tutorials/series/server-configuration/disable-htaccess-for-faster-performance/ 
15.	https://linuxblog.io/disable-htaccess-apache-performance/ 
16.	https://stackoverflow.com/questions/24916304/apache-response-time-is-severly-impacted-by-keepalive-timeout-value  
17.	https://helpcenter.woodwing.com/hc/en-us/articles/209989706-Performance-delays-with-Apache-KeepAlive-setting-on  
18.	https://users.cs.fiu.edu/~downeyt/webdev/timeout  
19.	https://iximiuz.com/en/posts/reverse-proxy-http-keep-alive-and-502s/ 
20.	https://www.linkedin.com/pulse/diagnosing-thread-pool-exhaustion-using-dumps-guide-pratik-ugale-wthpc 
21.	https://stackoverflow.com/questions/5963460/apache-webserver-what-happens-to-requests-when-all-worker-threads-are-busy 
22.	https://www.leansentry.com/guide/iis-aspnet-hangs/iis-thread-pool 
23.	https://betterstack.com/community/questions/what-does-apache-busy-workers-idle-workers-mean/  
24.	https://jazz.net/wiki/bin/view/Deployment/ConfiguringAndTuningIBMHTTPServer  
25.	https://pitstop.manageengine.com/portal/en/kb/articles/configure-ibm-http-server-status-url 
26.	https://learn.microsoft.com/en-us/answers/questions/1086084/reverse-dns-not-dynamcially-updating 
27.	https://www.eginnovations.com/blog/how-to-solve-slow-server-response-times/ 
28.	https://www.catalyst2.com/knowledgebase/apache/deny-access-to-ip-addresses-using-htaccess/ 
29.	https://httpd.apache.org/docs/2.4/dns-caveats.html 
30.	https://jazz.net/forum/questions/263811/problem-in-setting-up-ihs-server 
31.	https://www.hostmycode.in/tutorials/advanced-apache-web-server-configuration 
32.	https://www.loggly.com/ultimate-guide/apache-logging-basics/ 
33.	https://httpd.apache.org/docs/2.4/misc/security_tips.html 
34.	1000261717.jpg 
35.	https://www.datadoghq.com/blog/monitoring-apache-web-server-performance/ 
36.	https://nitropack.io/blog/post/reduce-initial-server-response-time 
37.	https://support.site24x7.com/portal/en/kb/articles/configure-status-url-apache 
38.	https://httpd.apache.org/docs/trunk/misc/perf-tuning.html 
39.	https://stackoverflow.com/questions/15652531/how-does-one-identify-why-a-website-is-slow 
40.	https://httpd.apache.org/docs/2.4/mod/mod_status.html 
41.	https://access.redhat.com/solutions/6207 
42.	https://learn.microsoft.com/en-us/troubleshoot/developer/webapps/iis/site-behavior-performance/slow-page-response-hangs 
43.	https://docs.oracle.com/cd/B14099_19/web.1012/q20206/mod/mod_status.html 
44.	https://uptimerobot.com/blog/common-website-downtime-reasons/ 
45.	https://www.ibm.com/support/pages/system/files/support/swg/swgdocs.nsf/0/a8b97c82d7ea52d685257d24006262d9/$FILE/WSTE-IHS_&_Plugin-PerformanceTuning-Guidelines.pdf 
46.	https://sematext.com/blog/apache-monitoring/ 
47.	https://www.reddit.com/r/devops/comments/5ot17p/a_webserver_is_running_slow_how_would_you_debug/ 
48.	https://publib.boulder.ibm.com/httpserv/ihsdiag/WebSphere61.html 
49.	https://datadome.co/learning-center/how-to-reduce-server-response-time/ 
50.	https://www.browserstack.com/guide/why-website-loading-slow 
51.	https://www.inmotionhosting.com/support/website/why-is-my-website-slow/ 
52.	https://www.devopsschool.com/blog/how-to-install-mod_status-on-your-apache-servers-and-enable-extendedstatus/ 
53.	https://syshero.org/2013-05-27-troubleshoot-slow-request-on-iis-and-apache/ 
54.	https://www.ipserverone.info/knowledge-base/how-to-enable-apache-extendedstatus/ 
55.	https://www.ibm.com/docs/en/sevone-npm/7.1.0?topic=guide-enable-web-status 
56.	https://websphereapplicationservernotes.wordpress.com/2012/04/18/apacheibm-http-server-performance-monitoring/ 
57.	https://www.tecmint.com/monitor-apache-web-server-load-and-page-statistics/ 
58.	https://stackoverflow.com/questions/30614239/apache-server-status-doesnt-show-cpu-usage 
59.	https://www.appservgrid.com/paw92/index.php/2019/04/06/how-to-monitor-apache-web-server-load-and-page-statistics/ 
60.	https://bbs.archlinux.org/viewtopic.php?id=270957 
61.	https://stackoverflow.com/questions/54910531/https-request-served-by-apache2-slower-than-via-reverse-proxy 
62.	https://stackoverflow.com/questions/4968158/very-long-response-time-when-accessing-apache-on-osx 
63.	https://publib.boulder.ibm.com/httpserv/manual60/dns-caveats.html 
64.	https://community.f5.com/discussions/technicalforum/apache-mod-status-server-status-not-showing-client-ip/152384 
65.	https://httpd.apache.org/docs/trunk/dns-caveats.html 
66.	https://www.reddit.com/r/HomeNetworking/comments/xusrmg/slow_dns_resolution_is_there_a_straightforward/ 
67.	https://documentation.help/httpd-2.0/mod_status.html 
68.	https://oracle-base.com/articles/misc/apache-server-status 
69.	https://www.youtube.com/watch?v=UGDREhMVfWU 
70.	https://www.reddit.com/r/SQLServer/comments/11eir3v/web_server_is_fine_but_database_or_server_is/ 
71.	https://www.tribalselfgov.org/wp-content/uploads/2017/05/CCrowder_Solutions-to-Modernize-IHS-Health-IT-4.26.17.pdf 
72.	https://learn.microsoft.com/en-us/troubleshoot/sql/database-engine/performance/troubleshoot-entire-sqlserver-slow 
73.	https://www.hhs.gov/sites/default/files/ihs-ht-mod-legacy-assessment.pdf 
74.	https://www.mongodb.com/community/forums/t/serverstatus-was-very-slow-what-does-each-item-mean/9444 
75.	https://www.ibm.com/docs/en/db2/11.5.x?topic=tools-health-monitor-overview 
76.	https://www.ihs.gov/ihm/pc/part-10/chapter-5-configuration-management/ 
77.	https://flywp.com/blog/13372/how-to-monitor-server-performance/ 
78.	https://www.ihs.gov/rpms/training/course-materials/?p=rpmsTraining\OptimizingRPMSEnvironment\HowToOptimizeRPMS-Healthshare2017.pdf&flname=HowToOptimizeRPMS-Healthshare2017.pdf&download=1 
79.	https://stackoverflow.com/questions/4563718/troubleshooting-slow-web-page-load-times-how-to-do-it-get-better 
80.	https://my.f5.com/manage/s/article/K14351 
81.	https://stackoverflow.com/questions/7467183/throttling-requests-by-ip-address-on-apache 
82.	https://www.tecmint.com/ubuntu-apache-mod_status/ 
83.	https://www.tecmint.com/allow-deny-access-website-apache/ 
84.	https://stackoverflow.com/questions/19083383/how-to-properly-enable-mod-status-on-an-apache-server 
85.	https://htaccessbook.com/access-control-apache-2-4/ 
86.	https://www.cyberciti.biz/faq/howto-configure-apache-server-performance/ 
87.	https://www.acunetix.com/blog/articles/slow-http-dos-attacks-mitigate-apache-http-server/ 
88.	https://stackoverflow.com/questions/25063677/how-much-does-using-htaccess-files-slow-down-website-performance-especially-wit 
89.	https://publib.boulder.ibm.com/httpserv/manual70/howto/access.html 
90.	https://httpd.apache.org/docs/current/howto/htaccess.html 
91.	https://httpd.apache.org/docs/2.4/howto/access.html 
92.	https://autopagerank.com/exhausted-available-threads-in-server-thread-pool/ 
93.	https://stackoverflow.com/questions/18981057/avoiding-busy-waiting-in-this-situation 
94.	https://stackoverflow.com/questions/17089498/what-happens-when-a-thread-pool-is-exhausted 
95.	https://www.apachelounge.com/viewtopic.php?t=6711 
96.	https://learn.microsoft.com/en-us/troubleshoot/developer/webapps/aspnet/performance/performance-call-web-service 
97.	https://forum.bestpractical.com/t/rt5-slow-performance-and-intermittent-internal-server-error/35298 
98.	https://www.adesso.de/en/news/blog/diagnosis-of-thread-pool-defects.jsp 
99.	https://www.digitalocean.com/community/questions/understanding-apache-workers-an-explanation-using-real-life-examples 
100.	https://forum.virtualmin.com/t/latency-issues-with-apache2-php-mariadb-on-debian-12-with-webmin-virtualmin-on-new-server/127563 
101.	https://www.reddit.com/r/dotnet/comments/dkesre/diagnose_iis_app_pool_hangs/ 
102.	https://documentation.help/httpd-2.2-es/mod_status.html 
103.	https://community.ibm.com/community/user/discussion/ihs-adding-delay-to-response-times 
104.	https://stackoverflow.com/questions/24847778/slow-apache-response-time-on-high-performance-server 
105.	https://stackoverflow.com/questions/29647599/apache-require-all-denied-http-status-code 
106.	https://blogs.manageengine.com/application-performance-2/appmanager/2024/04/17/how-to-monitor-apache-web-server-performance-metrics.html 
107.	https://www3.ntu.edu.sg/home/ehchua/programming/howto/Apache_HowToConfigure.html 
